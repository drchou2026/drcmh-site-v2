---
import MobileMenu from './MobileMenu.jsx';
import SearchModal from './SearchModal.jsx'; // 引入剛剛建立的元件

// 定義最新的選單結構
const menuItems = [
  { label: '關於醫師', href: '/#about' },
  { label: '最新消息', href: '/news' },
  { label: '主治專長', href: '/#expertise' },
  { label: '影音專區', href: '/video' },
  { label: '衛教專欄', href: '/blog' },
  { label: '門診資訊', href: '/#clinic' },
];
---

<link href="/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="/pagefind/pagefind-ui.js" is:inline></script>

<header class="fixed top-0 w-full z-40 bg-bg/80 backdrop-blur-md border-b border-white/20 shadow-sm transition-all duration-300">
  <div class="container mx-auto px-6 h-20 flex justify-between items-center">
    
    {/* Logo 區域 */}
    <a href="/" class="group flex flex-col justify-center items-start">
      <span class="font-serif text-2xl font-bold text-primary tracking-wide leading-none group-hover:text-accent transition-colors">
        Dr. Chou
      </span>
      <span class="text-[0.6rem] font-bold text-accent tracking-[0.2em] uppercase mt-1">
        Urology Clinic
      </span>
    </a>

    {/* 桌機版選單 (Desktop Nav) */}
    <div class="hidden md:flex items-center gap-6">
      <nav class="flex items-center gap-6">
        {menuItems.map(item => (
          <a 
            href={item.href} 
            class="text-sm font-medium text-text hover:text-primary transition-colors relative group py-2"
          >
            {item.label}
            {/* Hover 底線效果 */}
            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-accent transition-all duration-300 group-hover:w-full"></span>
          </a>
        ))}
      </nav>

      {/* 分隔線 */}
      <div class="h-4 w-px bg-gray-300/50"></div>

      {/* 功能區：搜尋 + CTA */}
      <div class="flex items-center gap-3">
        {/* 搜尋按鈕 */}
        <SearchModal client:visible />

        {/* CTA 按鈕 */}
        <a 
          href="/#clinic" 
          class="px-5 py-2.5 bg-primary text-white text-sm font-bold rounded-full hover:bg-accent hover:-translate-y-0.5 shadow-md shadow-primary/20 transition-all duration-300 flex items-center gap-2"
        >
          預約掛號
        </a>
      </div>
    </div>

    {/* 手機版 (Mobile) */}
    <div class="flex items-center gap-4 md:hidden">
      {/* 手機版也要顯示搜尋按鈕 */}
      <SearchModal client:visible />
      
      {/* 漢堡選單 (傳入 menuItems) */}
      <MobileMenu client:media="(max-width: 768px)" menuItems={menuItems} />
    </div>

  </div>
</header>

<style is:global>
  /* === Pagefind UI 自定義樣式 === */
  :root {
    --pagefind-ui-scale: 0.85;
    --pagefind-ui-primary: #2A8BC8; /* 您的 Primary Color */
    --pagefind-ui-text: #334155;    /* 您的 Text Color */
    --pagefind-ui-background: #ffffff;
    --pagefind-ui-border: #e2e8f0;
    --pagefind-ui-tag: #e2e8f0;
    --pagefind-ui-border-width: 1px;
    --pagefind-ui-border-radius: 8px;
    --pagefind-ui-font: 'Noto Sans TC', sans-serif;
  }

  /* 隱藏預設的一些醜醜的樣式 */
  .pagefind-ui__search-input {
    font-weight: 500;
    border: 1px solid #e2e8f0 !important;
  }
  
  .pagefind-ui__result-thumb {
    display: none !important; /* 隱藏搜尋結果的小圖，讓版面更乾淨 */
  }

  .pagefind-ui__result-title {
    font-family: 'Noto Serif TC', serif !important;
    font-weight: 700 !important;
    color: var(--pagefind-ui-primary) !important;
  }
  
  .pagefind-ui__result-excerpt {
    font-size: 0.9rem !important;
    color: #64748b !important;
  }
</style>